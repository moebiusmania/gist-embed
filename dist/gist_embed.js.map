{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/fetch-jsonp/build/fetch-jsonp.js","webpack:///./src/libs.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","defaultOptions","timeout","jsonpCallback","jsonpCallbackFunction","clearFunction","functionName","window","e","removeScript","scriptId","script","document","getElementById","getElementsByTagName","removeChild","_url","options","arguments","length","url","timeoutId","Promise","resolve","reject","callbackFunction","Date","now","Math","ceil","random","response","ok","json","clearTimeout","indexOf","jsonpScript","createElement","setAttribute","charset","id","appendChild","setTimeout","Error","onerror","apply","libs","user","uuid","fetch_jsonp_default","then","res","data","obj","params","assign","extend","loading","src_GistEmbed","HTMLElement","[object Object]","height","this","getAttribute","innerHTML","stylesheet","div","render","init","customElements","define"],"mappings":"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","file":"gist_embed.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","(function (global, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['exports', 'module'], factory);\n  } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n    factory(exports, module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, mod);\n    global.fetchJsonp = mod.exports;\n  }\n})(this, function (exports, module) {\n  'use strict';\n\n  var defaultOptions = {\n    timeout: 5000,\n    jsonpCallback: 'callback',\n    jsonpCallbackFunction: null\n  };\n\n  function generateCallbackFunction() {\n    return 'jsonp_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);\n  }\n\n  function clearFunction(functionName) {\n    // IE8 throws an exception when you try to delete a property on window\n    // http://stackoverflow.com/a/1824228/751089\n    try {\n      delete window[functionName];\n    } catch (e) {\n      window[functionName] = undefined;\n    }\n  }\n\n  function removeScript(scriptId) {\n    var script = document.getElementById(scriptId);\n    if (script) {\n      document.getElementsByTagName('head')[0].removeChild(script);\n    }\n  }\n\n  function fetchJsonp(_url) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    // to avoid param reassign\n    var url = _url;\n    var timeout = options.timeout || defaultOptions.timeout;\n    var jsonpCallback = options.jsonpCallback || defaultOptions.jsonpCallback;\n\n    var timeoutId = undefined;\n\n    return new Promise(function (resolve, reject) {\n      var callbackFunction = options.jsonpCallbackFunction || generateCallbackFunction();\n      var scriptId = jsonpCallback + '_' + callbackFunction;\n\n      window[callbackFunction] = function (response) {\n        resolve({\n          ok: true,\n          // keep consistent with fetch API\n          json: function json() {\n            return Promise.resolve(response);\n          }\n        });\n\n        if (timeoutId) clearTimeout(timeoutId);\n\n        removeScript(scriptId);\n\n        clearFunction(callbackFunction);\n      };\n\n      // Check if the user set their own params, and if not add a ? to start a list of params\n      url += url.indexOf('?') === -1 ? '?' : '&';\n\n      var jsonpScript = document.createElement('script');\n      jsonpScript.setAttribute('src', '' + url + jsonpCallback + '=' + callbackFunction);\n      if (options.charset) {\n        jsonpScript.setAttribute('charset', options.charset);\n      }\n      jsonpScript.id = scriptId;\n      document.getElementsByTagName('head')[0].appendChild(jsonpScript);\n\n      timeoutId = setTimeout(function () {\n        reject(new Error('JSONP request to ' + _url + ' timed out'));\n\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n        window[callbackFunction] = function () {\n          clearFunction(callbackFunction);\n        };\n      }, timeout);\n\n      // Caught if got 404/500\n      jsonpScript.onerror = function () {\n        reject(new Error('JSONP request to ' + _url + ' failed'));\n\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n        if (timeoutId) clearTimeout(timeoutId);\n      };\n    });\n  }\n\n  // export as global function\n  /*\n  let local;\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n  local.fetchJsonp = fetchJsonp;\n  */\n\n  module.exports = fetchJsonp;\n});","\r\nimport fetchJsonp from 'fetch-jsonp';\r\n\r\nconst extend = (obj, params) => Object.assign({}, obj, params);\r\n\r\nexport default (user, uuid) => {\r\n  const url = `https://gist.github.com/${user}/${uuid}.json`;\r\n\r\n  return fetchJsonp(url)\r\n    .then(res => res.json())\r\n    .then(data => extend(data, {loading: false}));\r\n};\r\n","\r\nimport getData from './libs';\r\n\r\nexport default class GistEmbed extends HTMLElement {\r\n  render(data) {\r\n    const height = this.getAttribute('height') || 50;\r\n\r\n    this.innerHTML = `\r\n      <link rel=\"stylesheet\" href=\"${data.stylesheet}\">\r\n      <div style=\"min-height: ${height}px\">${data.div}</div>\r\n    `;\r\n  }\r\n\r\n  init() {\r\n    const user = this.getAttribute('user') || '';\r\n    const uuid = this.getAttribute('uuid') || '';\r\n\r\n    getData(user, uuid)\r\n      .then(data => this.render(data));\r\n  }\r\n\r\n  connectedCallback() {\r\n    this.init();\r\n  }\r\n}\r\n\r\ncustomElements.define('gist-embed', GistEmbed);\r\n"],"sourceRoot":""}